
# 引言

对任何管理服务器的人员而言，对网络有基本的了解是十分重要的。这不仅是让你的服务上线并顺利运行的必要条件，它还为你提供了诊断问题的洞察力。

本文档将提供一些常见网络概念的基本概述，我们将讨论基本的术语，常见的协议，以及不同网络层的职责和特征。
该指南与操作系统无关，但是在实施利用服务器上网络的功能和服务时应该非常有帮助。


# 网络词汇表

在开始深入讨论网络之前，我们必须定义一些通用术语，你将在本指南以及与网络有关的其他指南和文档中看到这些术语。

这些术语将在下面的相应部分中进行扩展：
- `连接（connection）`： 在联网中，连接是指通过网络传输的相关信息。 这通常可以推断出一个连接是在数据传输之前建立的（通过遵循协议中规定的过程），然后在数据传输结束时对其进行解构。
- `Packet(包)`： 一般来说，数据包是通过网络传输的最基本的单元。 通过网络进行通信时，数据包是从一个端点到另一个端点（逐段）承载数据的信封。

`数据包的标头部分包含有关数据包的信息，包括源和目的地，时间戳，网络跃点等。数据包的主要部分包含要传输的实际数据。 有时称为主体或有效载荷。`

-` 网络接口(network interface)`: 网络接口可以是网络硬件的任何一种软件接口。例如，如果你的计算机中有两个网卡，你可以分别控制和配置与它们相关联的每个网络接口。


网络接口可以与物理设备相关联，也可以是虚拟接口的表示。回环设备就是这样一个例子，它是本地机器的一个虚拟接口。

- `LAN（本地网络）`: LAN代表“局域网”。它指的是一个网络或网络的一部分不能被更大的互联网公开访问。家庭或办公室网络就是局域网的一个例子。
- `WAN (广域网络)` : WAN代表“广域网”。它指的是比局域网广泛得多的网络。广域网是一个相关的术语，通常用来描述大型的、分散的网络，但它通常是指整个互联网。

如果说某个接口已连接到WAN，则通常认为该接口可通过Internet到达。

-` Protocol（协议）`： 协议是一组规则和标准，基本上定义了设备可以用来通信的语言。 网络中广泛使用大量协议，它们通常在不同的层中实现。


`一些底层协议是TCP、UDP、IP和ICMP。在这些较低的协议上构建的一些常见的应用层协议示例有HTTP(用于访问web内容)、SSH、TLS/SSL和FTP。`


- `Port(端口)`: 端口是一台机器上的一个地址，它可以被绑定到一个特定的软件上。它不是一个物理接口或位置，但它允许你的服务器能够使用多个应用程序进行通信。

- `Firewall(防火墙)`: 防火墙是一个程序，它决定是否允许流量进入或流出服务器。防火墙的工作方式通常是为端口上可接受的通信流类型创建规则。通常，防火墙会阻塞服务器上特定应用程序不使用的端口。

- `NAT(网络地址转化)`：NAT代表网络地址转换。它是一种将传入路由服务器的请求转换为局域网中它所知道的相关设备或服务器的方法。这通常在物理LAN中实现，用于将请求通过一个IP地址路由到必要的后端服务器。

- `VPN (虚拟专用网)`: VPN是虚拟专用网的缩写。它是一种通过互联网连接独立局域网的方式，同时又能保护隐私。这是一种连接远程系统的方法，就像它们在本地网络上一样，通常是出于安全原因。

你可能会遇到许多其他的术语，这个列表不可能是详尽的。我们将根据需要解释其他术语。此时，你应该理解一些基本的、高级的概念，这些概念将使我们能够更好地讨论将要讨论的主题。

# 网络层级

虽然网络常常以水平方式讨论拓扑结构，但是在主机之间，它的实现在整个计算机或网络中以垂直方式分层。
这意味着有多种技术和协议建立在彼此之上，以便通信更容易地工作。每一个连续的、更高的层都会对原始数据进行更多的抽象，从而使应用程序和用户更容易使用它。
它还允许你以新的方式利用低层，而不必花费时间和精力来开发处理这些类型的通信流的协议和应用程序。
根据你使用的模型，我们用来讨论每种分层方案的语言会有很大不同。 无论讨论层的模型如何，数据路径都是相同的。
当数据从一台计算机发送出去时，它从堆栈的顶部开始，然后向下过滤。在最低级别，实际传输到另一台机器。此时，数据通过其他计算机层返回。
每个层都有能力在它从相邻层接收到的数据周围添加它自己的“包装器”，这将帮助后面的层决定在传递数据时如何处理数据。

# OSI模型
从历史上看，讨论网络通信的不同层次的一种方法是OSI模型。OSI代表开放系统互连。
这个模型定义了七个独立的层。这个模型的层是:

- `Application（应用）`：应用层是用户和用户应用程序最常交互的层。网络通信从资源的可用性、要与之通信的点对点和数据同步等方面进行了交互。

- `Presentation （表现）`：表示层负责映射资源和创建上下文。它用于将较低级别的网络数据转换为应用程序期望看到的数据。

- `Session（会话）`：会话层是一个连接处理程序。它以持久的方式创建、维护和销毁节点之间的连接。

- `Transport（传输）`： 传输层负责为其上的层提供可靠的连接。在此上下文中，可靠指的是验证连接的另一端接收到的数据是否完整的能力。

此层可以重新发送已删除或损坏的信息，并可以确认接收到的数据到远程计算机。

-` Network (网络)`: 网络层用于在网络上不同的节点之间路由数据。它使用地址能够告诉哪台计算机发送信息。该层还可以将较大的消息分解成较小的块，然后在另一端重新组装。

- `Data Link(数据链路)`: 此层实现为使用现有物理连接在网络上不同节点或设备之间建立和维护可靠链接的方法。
- `Physical(物理)`：物理层负责处理用于建立连接的实际物理设备。这一层包括管理物理连接的裸软件和硬件本身(如以太网)。

正如你所看到的，可以根据与裸硬件的接近程度和它们提供的功能来讨论许多不同的层。


# TCP/IP 模型

TCP/IP模型，通常称为Internet协议套件，是另一种更简单且被广泛采用的分层模型。它定义了四个独立的层，其中一些与OSI模型重叠:

- `应用（application）`： 在这个模型中，应用层负责在应用程序之间创建和传输用户数据。应用程序可以在远程系统上运行，对最终用户来说应该是本地操作。

话说这种交流发生在点对点之间

- `运输(Transport)`: 传输层负责进程之间的通信。此级别的网络利用端口来处理不同的服务。它可以根据使用的协议类型建立不可靠或可靠的连接。

-` 网络（Internet）`： internet层用于在网络中从一个节点到另一个节点传输数据。该层知道连接的端点，但不关心从一个地方到另一个地方所需的实际连接。IP地址在这一层被定义为一种以可寻址方式到达远程系统的方式。

- `链路（Link）`： 链路层实现了本地网络的实际拓扑结构，允许internet层提供可寻址的接口。它建立相邻节点之间的连接来发送数据。

# 接口

接口是计算机的网络通信点。每个接口都与物理或虚拟网络设备相关联。通常，您的服务器将为您拥有的每个以太网或无线internet卡提供一个可配置的网络接口。
通常，你的服务器将为你拥有的每个以太网或无线internet卡提供一个可配置的网络接口。
此外，它将定义一个名为“loopback”或localhost接口的虚拟网络接口。它被用作一个接口，将单个计算机上的应用程序和进程连接到其他应用程序和进程。您可以在许多工具中看到这个引用为“lo”接口。
很多时候，管理员将一个接口配置为服务internet流量，另一个接口配置为LAN或专用网络。

# 协议
网络的工作原理是将许多不同的协议建立在彼此之上。通过这种方式，可以使用彼此封装的多个协议来传输数据。
我们将讨论一些更常见的协议，你可能会遇到这些协议，并尝试解释它们之间的差异，以及它们所涉及的流程的哪一部分。
我们将从在较低的网络层上实现的协议开始，然后逐步上升到更高抽象的协议。


## Media Access Control 介质访问控制

媒体访问控制是一种用于区分特定设备的通信协议。在生产过程中，每个设备都应该有一个唯一的MAC地址，这使得它与互联网上的其他设备有所不同。
通过MAC地址寻址硬件允许您通过一个唯一的值引用一个设备，即使在操作过程中，上面的软件可能会更改特定设备的名称。
媒体访问控制是来自链路层的唯一协议之一，你可能会定期与之交互。

## IP
IP协议是允许internet工作的基本协议之一。IP地址在每个网络上都是唯一的，它们允许机器通过网络互相寻址。它是在IP/TCP模型的internet层上实现的。
网络可以连接在一起，但流量必须在跨越网络边界时进行路由。该协议假设一个不可靠的网络和多个路径可以到达同一个目的地，并且可以在这些路径之间动态更改。
协议有许多不同的实现。目前最常见的实现是IPv4，尽管由于IPv4地址的稀缺性和协议功能的改进，IPv6作为一种替代方案越来越受欢迎。

## ICMP
ICMP是internet控制消息协议的缩写。它用于在设备之间发送消息，以指示可用性或错误条件。这些数据包用于各种网络诊断工具，如ping和traceroute。
通常，当不同类型的包遇到某种问题时，就会传输ICMP包。基本上，它们被用作网络通信的反馈机制。

## TCP
TCP代表传输控制协议。它在IP/TCP模型的传输层实现，用于建立可靠的连接。
TCP是将数据封装到包中的协议之一。然后，它使用较低层可用的方法将这些数据传输到连接的远程端。另一方面，它可以检查错误，请求重新发送某些片段，并将信息重新组装成逻辑片段发送给应用层。
该协议使用一种称为三向握手的系统，在数据传输之前建立连接。这是通信的两端确认请求并就确保数据可靠性的方法达成一致的一种方式。
数据发送后，使用类似的四向握手来断开连接。
TCP是许多最流行的internet用途(包括WWW、FTP、SSH和电子邮件)所选择的协议。可以肯定地说，如果没有TCP，我们今天所知道的internet就不会存在。

## UDP
UDP代表用户数据报协议。它是TCP的一个流行的伙伴协议，也在传输层中实现。
UDP和TCP的根本区别在于UDP提供不可靠的数据传输。它不会验证连接的另一端是否收到了数据。这听起来像是一件坏事，但从很多方面来说，它的确是一件坏事。但是，对于某些功能来说，它也非常重要。
因为不需要等待确认数据已接收并强制重新发送数据，所以UDP比TCP快得多。它不与远程主机建立连接，只是将数据发送到该主机，并不关心它是否被接受。
因为它是一个简单的事务，所以对于简单的通信(如查询网络资源)非常有用。它也不维护状态，这使得它可以很好地将数据从一台机器传输到许多实时客户端。这使得它成为VOIP、游戏和其他不能承受延迟的应用程序的理想选择。

## HTTP
HTTP代表超文本传输协议。它是在应用层定义的协议，构成了web上通信的基础。
HTTP定义了许多函数，这些函数告诉远程系统您正在请求什么。例如，GET、POST和DELETE都以不同的方式与请求的数据交互。

## FTP
FTP代表文件传输协议。它还位于应用程序层，提供了将完整的文件从一个主机传输到另一个主机的方法。
它本质上是不安全的，所以不建议用于任何面向外部的网络，除非它是作为一个公共的、仅下载的资源实现的。

## DNS
DNS代表域名系统。它是一个应用层协议，用于为internet资源提供一种人性化的命名机制。它将域名与IP地址绑定在一起，并允许你在浏览器中通过名称访问站点。

## SSH
SSH代表secure shell。它是在应用层实现的加密协议，可以用于以安全的方式与远程服务器通信。由于它的端到端加密和普遍性，许多附加技术都是围绕该协议构建的。
还有许多其他的协议我们还没有涉及到，但它们同样重要。然而，这将使您对使internet和网络成为可能的一些基本技术有一个很好的概述。

# 结论
此时，你应该熟悉一些基本的网络术语，并能够理解不同的组件是如何相互通信的。这将有助于你理解其他文章和系统的文档。
